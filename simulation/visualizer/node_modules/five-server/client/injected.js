(()=>{"use strict";({86:function(){var e=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(s,r){function i(e){try{l(n.next(e))}catch(e){r(e)}}function a(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,a)}l((n=n.apply(e,t||[])).next())}))};let t=document.body?document.body.cloneNode(!0):void 0;"WebSocket"in window&&window.addEventListener("load",(()=>{console.log("[Five Server] connecting...");const o=document.querySelector('[data-id="five-server"]'),n=`${"http:"===window.location.protocol?"ws://":"wss://"}${new URL(o.src).host}${window.location.pathname.replace(/\/+$/gm,"/fsws")}`,s="[Five Server] connected.";let r,i=1e3,a=0,l="";const c=(e,t,o={})=>{const n=JSON.stringify({message:e,type:t,options:o});if(l===n)return;l=n;let s=document.getElementById("fiveserver-info-wrapper");s&&s.remove();const{time:r=3,animation:i=!0}=o;s=document.createElement("div"),s.id="fiveserver-info-wrapper",s.style.zIndex="100",s.style.display="flex",s.style.justifyContent="center",s.style.position="fixed",s.style.top="flex",s.style.left="50%",s.style.transform="translateX(-50%)",s.style.width="100%",s.style.maxWidth="80%";const a=document.createElement("div");a.id="fiveserver-info",a.style.fontSize="16px",a.style.fontFamily="Arial, Helvetica, sans-serif",a.style.color="white",a.style.backgroundColor="black",a.style.padding="4px 12px",a.style.borderRadius="4px",a.style.whiteSpace="pre-wrap",s.appendChild(a),document.body.appendChild(s),"error"===t?(s.style.top="4px",s.style.animation="",a.style.color="black",a.style.backgroundColor="red"):i?(s.style.top="-40px",s.style.animation=`fiveserverInfoPopup ${r}s forwards`):(s.style.top="4px",s.style.animation=""),"success"===t?(a.style.color="#498d76",a.style.backgroundColor="#00ffa9"):"info"===t&&(a.style.color="#d2e1f0",a.style.backgroundColor="#2996ff"),a.innerHTML=e.replace(/</gm,"&lt;")},d=(e,...t)=>{r&&1===(null==r?void 0:r.readyState)&&r.send(JSON.stringify({console:{type:e,message:t}}))},f=e=>{const t=document.getElementsByTagName("head")[0];let o=Array.from(document.getElementsByTagName("link"));o=o.filter((e=>/\.css/gm.test(e.href)||"stylesheet"==e.rel.toLowerCase()));for(let e=0;e<o.length;++e){const n=o[e],s=n.href.replace(/(&|\?)_cacheOverride=\d+/,"");n.href=`${s}${s.indexOf("?")>=0?"&":"?"}_cacheOverride=${(new Date).valueOf()}`,t.appendChild(n)}o.length>0&&e&&c("css updated","info")};let u,p="";const y=new DOMParser;let m=!1;const g=e=>{if("HIDE"===e||"HIDE_MESSAGE"===e||"HIDE_MESSAGES"===e){const e=document.getElementById("fiveserver-info-wrapper");e&&e.remove()}else c(e,"info",{animation:!1})},h=()=>{r=new WebSocket(n),r.onmessage=function(n){if(i=1e3,a=0,"reload"===n.data)window.location.reload();else if("refreshcss"===n.data)f(!0);else if("refreshcss-silent"===n.data)f(!1);else if("connected"===n.data){console.log(s);const e=document.querySelector('[data-id="five-server"]');e&&e.dispatchEvent(new Event("connected"))}else if("initRemoteLogs"===n.data)(()=>{const e=console.log;console.log=function(...t){t[0]===s?c("connected","success"):d("log",...t),e.apply(console,t)};const t=console.warn;console.warn=function(...e){d("warn",...e),t.apply(console,e)};const o=console.error;console.error=function(...e){d("error",...e),o.apply(console,e)}})();else{const s=JSON.parse(n.data);s.navigate&&window.location.replace(s.navigate),s.body&&s.hot?(n=>{e(void 0,void 0,void 0,(function*(){if(""===p&&(yield(p="loading",new Promise((e=>{const t=`//${new URL(o.src).host}/fiveserver/scripts/diffDOM.js`,n=document.createElement("script");n.type="text/javascript",n.src=t,n.onload=()=>{setTimeout((()=>{u=new diffDOM.DiffDOM,p="ready",e()}))},document.getElementsByTagName("head")[0].appendChild(n)})))),"ready"===p)try{const e=t,o=(y.parseFromString(n,"text/html"),document.createElement("body"));o.innerHTML=n;const s=u.diff(e,o),r=document.body.cloneNode(!0);if(u.apply(r,s)&&u.apply(document.body,s)){t=o,m&&(m=!1,g("HIDE"));const e=document.querySelector('[data-highlight="true"]');if(e){const t=e=>e.offsetTop+(e.offsetParent?t(e.offsetParent):0),o=t(e)-window.innerHeight/2;window.scrollTo(0,o)}}}catch(e){m=!0,g("Having issues parsing the DOM.\nPlease verify that your HTML is valid...")}}))})(s.body):s.body&&(r=s.body,document.body.innerHTML=r),s.messages&&(e=>{g(e.join("\n\n"))})(s.messages),s.message&&g(s.message)}var r},r.onopen=function(){if(a>0)return void window.location.reload();const e=document.querySelectorAll("script");for(let t=0;t<e.length;t++){const o=e[t];o.dataset&&o.dataset.file&&r.send(JSON.stringify({file:o.dataset.file}))}const t=document.createElement("style");t.innerHTML='      \n      /* Injected by five-server */\n      [data-highlight="true"] {\n        border: 1px rgb(90,170,255) solid !important;\n        background-color: rgba(155,215,255,0.5);\n        animation: fadeOutHighlight 1s forwards 0.5s;\n      }\n      img[data-highlight="true"] {\n        filter: sepia(100%) hue-rotate(180deg) saturate(200%);\n        animation: fadeOutHighlightIMG 0.5s forwards 0.5s;\n      }\n      @keyframes fadeOutHighlight {\n        from {background-color: rgba(155,215,255,0.5);}\n        to {background-color: rgba(155,215,255,0);}\n      }      \n      @keyframes fadeOutHighlightIMG {\n        0% {filter: sepia(100%) hue-rotate(180deg) saturate(200%);}\n        33% {filter: sepia(66%) hue-rotate(180deg) saturate(100%);}\n        50% {filter: sepia(50%) hue-rotate(90deg) saturate(50%);}\n        66% {filter: sepia(33%) hue-rotate(0deg) saturate(100%);}\n        100% {filter: sepia(0%) hue-rotate(0deg) saturate(100%);}\n      }\n      @keyframes fiveserverInfoPopup {\n        0%   {top:-40px;}\n        15%  {top:4px;}\n        85%  {top:4px;}\n        100% {top:-40px;}\n      }\n      /*smaller*/\n      @media (max-width: 640px) {\n        #fiveserver-info-wrapper {\n          max-width: 98%;\n        }\n        #fiveserver-info {\n          border-radius: 0px;\n        }      \n      }\n\n      ',document.head.appendChild(t)},r.onclose=function(e){c("lost connection to dev server","error"),0===a&&console.log("Socket is closed. Reconnect will be attempted in 1 second.",e.reason),setTimeout((function(){a++,a>1&&console.log("connecting..."),a<=25&&h(),i=Math.floor(1.1*i)}),i)},r.onerror=function(e){r.close()}};let v=0;const w=()=>{if(v>10)return console.error("[Five Server] status check failed"),console.log("[Five Server] browser reloads in 5 seconds"),void setTimeout((()=>{window.location.reload()}),5e3);console.log("[Five Server] status check..."),setTimeout((()=>{b()}),1e3)},b=()=>e(void 0,void 0,void 0,(function*(){v++;const e=`${new URL(o.src).protocol}//${new URL(o.src).host}/fiveserver/status`;try{const t=yield fetch(e),o=yield t.json();o&&o.status&&"online"===o.status?(h(),v=0):w()}catch(e){w()}}));b()}))}})[86]()})();